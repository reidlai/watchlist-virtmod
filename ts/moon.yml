$schema: "https://moonrepo.dev/schemas/project.json"
id: "watchlist-ts"
type: "library"
stack: "frontend"

tasks:
  build:
    outputs: []
    options:
      mergeArgs: "replace"
      mergeOutputs: "replace"

  lint:
    command: "eslint ."
    inputs: ["**/*", "!node_modules/**", "**/.*/**"]
    options:
      mergeArgs: "replace"
      mergeInputs: "replace"

  test:
    command: "vitest run"
    platform: node
    options:
      mergeArgs: "replace"

  format:
    command: "prettier --write --ignore-path ../../../.prettierignore ."
    inputs: ["**/*", "!node_modules/**", "**/.*/**"]
    platform: node
    options:
      mergeArgs: "replace"

  zodios-gen:
    command: 'npx openapi-zod-client "../go/gen/http/openapi3.json" -o "./src/lib/api-client.ts"'
    deps:
      - "build"
