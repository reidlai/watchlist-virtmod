// Code generated by goa v3.23.4, DO NOT EDIT.
//
// watchlist HTTP server types
//
// Command:
// $ goa gen github.com/reidlai/ta-workspace/modules/watchlist/go/design
// --output goa_gen

package server

import (
	watchlist "github.com/reidlai/ta-workspace/modules/watchlist/go/goa_gen/gen/watchlist"
	goa "goa.design/goa/v3/pkg"
)

// AddWatchlistTickerRequestBody is the type of the "watchlist" service
// "addWatchlistTicker" endpoint HTTP request body.
type AddWatchlistTickerRequestBody struct {
	// Stock Symbol
	Symbol *string `form:"symbol,omitempty" json:"symbol,omitempty" xml:"symbol,omitempty"`
	// Stock Name
	Name *string `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	// Exchange MIC Code
	ExchangeMic *string `form:"exchange_mic,omitempty" json:"exchange_mic,omitempty" xml:"exchange_mic,omitempty"`
}

// GetWatchlistResponseBody is the type of the "watchlist" service
// "getWatchlist" endpoint HTTP response body.
type GetWatchlistResponseBody struct {
	Tickers []*TickerItemResponseBody `form:"tickers" json:"tickers" xml:"tickers"`
}

// AddWatchlistTickerResponseBody is the type of the "watchlist" service
// "addWatchlistTicker" endpoint HTTP response body.
type AddWatchlistTickerResponseBody struct {
	// Ticker information
	Ticker *TickerResponseBody `form:"ticker" json:"ticker" xml:"ticker"`
	// latest OHLCV record
	Ohlcv *OHLCVResponseBody `form:"ohlcv" json:"ohlcv" xml:"ohlcv"`
}

// TickerItemResponseBody is used to define fields on response body types.
type TickerItemResponseBody struct {
	// Ticker information
	Ticker *TickerResponseBody `form:"ticker" json:"ticker" xml:"ticker"`
	// latest OHLCV record
	Ohlcv *OHLCVResponseBody `form:"ohlcv" json:"ohlcv" xml:"ohlcv"`
}

// TickerResponseBody is used to define fields on response body types.
type TickerResponseBody struct {
	// Stock Symbol
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// Stock Name
	Name *string `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	// Exchange MIC Code
	ExchangeMic *string `form:"exchange_mic,omitempty" json:"exchange_mic,omitempty" xml:"exchange_mic,omitempty"`
}

// OHLCVResponseBody is used to define fields on response body types.
type OHLCVResponseBody struct {
	// Open Price
	Open float64 `form:"open" json:"open" xml:"open"`
	// High Price
	High float64 `form:"high" json:"high" xml:"high"`
	// Low Price
	Low float64 `form:"low" json:"low" xml:"low"`
	// Close Price
	Close float64 `form:"close" json:"close" xml:"close"`
	// Volume
	Volume float64 `form:"volume" json:"volume" xml:"volume"`
	// Price Change
	Change float64 `form:"change" json:"change" xml:"change"`
	// Price Change Percent
	ChangePercent float64 `form:"change_percent" json:"change_percent" xml:"change_percent"`
	// Last Update Timestamp (Unix)
	LastUpdatedAt int64 `form:"last_updated_at" json:"last_updated_at" xml:"last_updated_at"`
}

// NewGetWatchlistResponseBody builds the HTTP response body from the result of
// the "getWatchlist" endpoint of the "watchlist" service.
func NewGetWatchlistResponseBody(res *watchlist.Watchlist) *GetWatchlistResponseBody {
	body := &GetWatchlistResponseBody{}
	if res.Tickers != nil {
		body.Tickers = make([]*TickerItemResponseBody, len(res.Tickers))
		for i, val := range res.Tickers {
			if val == nil {
				body.Tickers[i] = nil
				continue
			}
			body.Tickers[i] = marshalWatchlistTickerItemToTickerItemResponseBody(val)
		}
	} else {
		body.Tickers = []*TickerItemResponseBody{}
	}
	return body
}

// NewAddWatchlistTickerResponseBody builds the HTTP response body from the
// result of the "addWatchlistTicker" endpoint of the "watchlist" service.
func NewAddWatchlistTickerResponseBody(res *watchlist.TickerItem) *AddWatchlistTickerResponseBody {
	body := &AddWatchlistTickerResponseBody{}
	if res.Ticker != nil {
		body.Ticker = marshalWatchlistTickerToTickerResponseBody(res.Ticker)
	}
	if res.Ohlcv != nil {
		body.Ohlcv = marshalWatchlistOHLCVToOHLCVResponseBody(res.Ohlcv)
	}
	return body
}

// NewAddWatchlistTickerPayload builds a watchlist service addWatchlistTicker
// endpoint payload.
func NewAddWatchlistTickerPayload(body *AddWatchlistTickerRequestBody) *watchlist.AddWatchlistTickerPayload {
	v := &watchlist.Ticker{
		Symbol:      *body.Symbol,
		Name:        body.Name,
		ExchangeMic: body.ExchangeMic,
	}
	res := &watchlist.AddWatchlistTickerPayload{
		Ticker: v,
	}

	return res
}

// NewRemoveWatchlistTickerPayload builds a watchlist service
// removeWatchlistTicker endpoint payload.
func NewRemoveWatchlistTickerPayload(symbol string) *watchlist.RemoveWatchlistTickerPayload {
	v := &watchlist.RemoveWatchlistTickerPayload{}
	v.Symbol = symbol

	return v
}

// ValidateAddWatchlistTickerRequestBody runs the validations defined on
// AddWatchlistTickerRequestBody
func ValidateAddWatchlistTickerRequestBody(body *AddWatchlistTickerRequestBody) (err error) {
	if body.Symbol == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("symbol", "body"))
	}
	return
}
